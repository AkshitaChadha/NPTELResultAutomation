<!DOCTYPE html>
<html>
<head>
<title>Manage Branches</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

<style>
/* Flash Messages */
.alert {
    padding: 12px;
    margin-bottom: 20px;
    border-radius: 6px;
    font-weight: 500;
}

.alert-success {
    background-color: #e8f5e9;
    color: #2e7d32;
    border: 1px solid #2e7d32;
}

.alert-danger {
    background-color: #fdecea;
    color: #c0392b;
    border: 1px solid #c0392b;
}
</style>

</head>
<body>

<div class="navbar">
    <h3>NPTEL Result System</h3>

    <div class="nav-actions">
        <a href="/hod_dashboard">
            <button class="secondary-btn">Dashboard</button>
        </a>
        <a href="/logout">
            <button class="primary-btn">Logout</button>
        </a>
    </div>
</div>

<div class="mergecontainer">

<h2 class="page-title">Manage Branches</h2>
<br>

<!-- ================= FLASH MESSAGES ================= -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

<!-- ================= Add Branch ================= -->
<form method="POST" class="form-box" style="margin-bottom:20px;">

    <div class="form-group">
        <label>Branch Name</label><br>
        <input name="branch_name" required>
    </div>

    <button class="primary-btn">Add Branch</button>
</form>

<hr>

<!-- ================= Branch Table ================= -->
{% if branches %}

<table class="styled-table">
<tr>
<th>Branch</th>
<th>Action</th>
</tr>

{% for branch in branches %}
<tr>
<td>{{ branch["name"] }}</td>
<td>
<a href="/delete_branch/{{ branch['id'] }}"
   onclick="return confirm('Are you sure you want to delete this branch?');">
<button type="button" class="secondary-btn">Delete</button>
</a>
</td>
</tr>
{% endfor %}

</table>

{% else %}
<p>No branches added yet.</p>
{% endif %}

</div>

<!-- Auto-hide flash after 3 sec -->
<script>
setTimeout(function() {
    let alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => alert.style.display = 'none');
}, 3000);
</script>

</body>
</html>